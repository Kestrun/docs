---
layout: default
title: "HostingExtensions.RunUntilShutdownAsync method"
parent: "Kestrun.Utilities"
grand_parent: "C# API"
---
# HostingExtensions.RunUntilShutdownAsync method

Starts *server*, blocks until the process receives Ctrl-C / SIGTERM (or *stopToken* is cancelled), then calls `StopAsync` and disposes the host.

```csharp
public static Task RunUntilShutdownAsync(this KestrunHost server, bool configureConsole = true, 
    Encoding? consoleEncoding = null, Action? onStarted = null, 
    Action<Exception>? onShutdownError = null, CancellationToken stopToken = default)
```

## Remarks

Intended for console apps’ `Main`; keeps boiler-plate out of every sample you write.

If *configureConsole* is `true` (default) the method hooks CancelKeyPress. In a service/daemon scenario you can pass `false` and supply your own cancellation token.

## See Also

* class [KestrunHost](../../Kestrun.Hosting/KestrunHost)
* class [HostingExtensions](../HostingExtensions)
* namespace [Kestrun.Utilities](../../Kestrun)

<!-- DO NOT EDIT: generated by xmldocmd for Kestrun.dll -->
